/****************************************************************************
 *          test.c
 *
 *          Copyright (c) 2015 Niyamaka.
 *          All Rights Reserved.
 ****************************************************************************/
#include <stdlib.h>
#include <locale.h>
#include <string.h>
#include <inttypes.h>
#include <time.h>
#include "/yuneta/development/yuneta/^gobj-ecosistema/ghelpers/src/21_json_xml.h"

/***************************************************************************
 *      Constants
 ***************************************************************************/

/***************************************************************************
 *      Structures
 ***************************************************************************/

/***************************************************************************
 *      Prototypes
 ***************************************************************************/

/***************************************************************************
 *      Data
 ***************************************************************************/
char *xml1 = ""
"<status><verf>3."
"82</verf><id>D26"
"628B887221B2F</i"
"d><p>0</p><regs>"
"<tr>0</tr><ta>36"
"28444955</ta><ts"
">0</ts></regs><u"
"nits><u><s>0</s>"
"<t>ERROR</t><vg>"
"</vg><vn></vn><m"
"></m><f></f></u>"
"<u><s>1</s><t>ER"
"ROR2</t><vg></vg>"
"<vn></vn><m></m>"
"<f></f></u></uni"
"ts><ibid></ibid>"
"<rtc>2018/09/18 "
"10:14:01</rtc><g"
"ps><lat>9.008500"
"</lat><lon>-79.5"
"06740</lon><alt>"
"29.100</alt><sp>"
"0.04</sp><c>301."
"2</c><h>0.9</h><"
"/gps></status>";

/***************************************************************************
 *
 ***************************************************************************/
void pinta_json(void *user_data, json_t *kw)
{
    print_json(kw);
}

/***************************************************************************
 *                      Main
 ***************************************************************************/
int main(int argc, char *argv[])
{
    void *parser = xml_init(
        0,
        0,
        0,
        0,
        pinta_json
    );

    if (xml_parse(parser, xml1, strlen(xml1)) < 0) {
        printf("ERROR parsing xml->json\n");
    }

    xml_end(parser);

    return 0;
}

